<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>POST Data</title>
  <link rel="stylesheet" href="stylesblog.css">
</head>
<body>
  <div class="data-form">
    <input type="number" id="id" placeholder="ID">
    <input type="text" id="title" placeholder="Title">
    <input type="text" id="tanggal" placeholder="Tanggal">
    <input type="text" id="judul" placeholder="Judul">
    <input type="text" id="description" placeholder="Description">
    <select id="content">
      <!-- Options will be populated dynamically -->
    </select>
    <button onclick="postData()">Submit</button>
  </div>

  <div class="data-display" style="display: none;">
    <h2>Data Details</h2>
    <p><strong>ID:</strong> <span id="dataId"></span></p>
    <p><strong>Title:</strong> <span id="dataTitle"></span></p>
    <p><strong>Tanggal:</strong> <span id="dataTanggal"></span></p>
    <p><strong>Judul:</strong> <span id="dataJudul"></span></p>
    <p><strong>Description:</strong> <span id="dataDescription"></span></p>
    <p><strong>Content:</strong> <span id="dataContent"></span></p>
  </div>

  <script>
    async function fetchDataForDropdown() {
      try {
        const response = await fetch('https://asia-southeast2-testlogin-366704.cloudfunctions.net/bismillahcontentall');
        const data = await response.json();

        populateDropdown(data);
      } catch (error) {
        console.error('Error:', error);
      }
    }

    function populateDropdown(data) {
      const contentDropdown = document.getElementById('content');
      
      data.forEach(item => {
        const option = document.createElement('option');
        option.value = item.ID; // Set the value of the option
        option.text = `ID: ${item.ID}, Content: ${item.content}, Image: ${item.image}, Description: ${item.description}`; // Set the text displayed in the option
        contentDropdown.appendChild(option);
      });
    }

    async function postData() {
      // Retrieve data from the form fields
      const data = {
        "id": parseInt(document.getElementById('id').value),
        "Title": document.getElementById('title').value,
        "Tanggal": document.getElementById('tanggal').value,
        "judul": document.getElementById('judul').value,
        "Description": document.getElementById('description').value,
        "SelectedContent": document.getElementById('content').value
      };

      try {
        // Perform POST request with the collected data
        const response = await fetch('https://asia-southeast2-testlogin-366704.cloudfunctions.net/asdbhjkasdlbkhjbashklflaskdfj', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)
        });

        const result = await response.json();

        displayData(result);
      } catch (error) {
        console.error('Error:', error);
      }
    }

    function displayData(result) {
      const dataId = document.getElementById('dataId');
      const dataTitle = document.getElementById('dataTitle');
      const dataTanggal = document.getElementById('dataTanggal');
      const dataJudul = document.getElementById('dataJudul');
      const dataDescription = document.getElementById('dataDescription');
      const dataContent = document.getElementById('dataContent');

      dataId.textContent = result.id;
      dataTitle.textContent = result.Title;
      dataTanggal.textContent = result.Tanggal;
      dataJudul.textContent = result.judul;
      dataDescription.textContent = result.Description;
      dataContent.textContent = result.SelectedContent;

      const displaySection = document.querySelector('.data-display');
      displaySection.style.display = 'block';
    }
    // Call fetchDataForDropdown when the page is loaded for the first time
    fetchDataForDropdown();
  </script>
</body>
</html>
